(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function O(){}const $e=e=>e;function de(e){return e()}function ne(){return Object.create(null)}function M(e){e.forEach(de)}function V(e){return typeof e=="function"}function he(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ee(e){return Object.keys(e).length===0}function xe(e){return e&&V(e.destroy)?e.destroy:O}const me=typeof window<"u";let ke=me?()=>window.performance.now():()=>Date.now(),te=me?e=>requestAnimationFrame(e):O;const I=new Set;function _e(e){I.forEach(t=>{t.c(e)||(I.delete(t),t.f())}),I.size!==0&&te(_e)}function Ae(e){let t;return I.size===0&&te(_e),{promise:new Promise(n=>{I.add(t={c:e,f:n})}),abort(){I.delete(t)}}}function D(e,t){e.appendChild(t)}function pe(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function be(e){const t=L("style");return Oe(pe(e),t),t.sheet}function Oe(e,t){return D(e.head||e,t),t.sheet}function Z(e,t,n){e.insertBefore(t,n||null)}function N(e){e.parentNode&&e.parentNode.removeChild(e)}function Le(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function L(e){return document.createElement(e)}function ye(e){return document.createTextNode(e)}function ge(){return ye(" ")}function ie(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function Se(e){return function(t){return t.preventDefault(),e.call(this,t)}}function x(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Te(e){return Array.from(e.childNodes)}function De(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Ie(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}const J=new Map;let Q=0;function Me(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ne(e,t){const n={stylesheet:be(t),rules:{}};return J.set(e,n),n}function Pe(e,t,n,i,r,o,s,_=0){const d=16.666/i;let u=`{
`;for(let y=0;y<=1;y+=d){const m=t+(n-t)*o(y);u+=y*100+`%{${s(m,1-m)}}
`}const h=u+`100% {${s(n,1-n)}}
}`,l=`__svelte_${Me(h)}_${_}`,a=pe(e),{stylesheet:c,rules:f}=J.get(a)||Ne(a,e);f[l]||(f[l]=!0,c.insertRule(`@keyframes ${l} ${h}`,c.cssRules.length));const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${l} ${i}ms linear ${r}ms 1 both`,Q+=1,l}function oe(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(e.style.animation=i.join(", "),Q-=r,Q||He())}function He(){te(()=>{Q||(J.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&N(t)}),J.clear())})}let W;function z(e){W=e}function Re(){if(!W)throw new Error("Function called outside component initialization");return W}function Fe(e){Re().$$.on_mount.push(e)}const R=[],re=[],K=[],se=[],je=Promise.resolve();let ee=!1;function ze(){ee||(ee=!0,je.then(ve))}function Y(e){K.push(e)}const C=new Set;let X=0;function ve(){const e=W;do{for(;X<R.length;){const t=R[X];X++,z(t),We(t.$$)}for(z(null),R.length=0,X=0;re.length;)re.pop()();for(let t=0;t<K.length;t+=1){const n=K[t];C.has(n)||(C.add(n),n())}K.length=0}while(R.length);for(;se.length;)se.pop()();ee=!1,C.clear(),z(e)}function We(e){if(e.fragment!==null){e.update(),M(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}let P;function Ye(){return P||(P=Promise.resolve(),P.then(()=>{P=null})),P}function le(e,t,n){e.dispatchEvent(Ie(`${t?"intro":"outro"}${n}`))}const U=new Set;let T;function Ge(){T={r:0,c:[],p:T}}function Xe(){T.r||M(T.c),T=T.p}function G(e,t){e&&e.i&&(U.delete(e),e.i(t))}function ce(e,t,n,i){if(e&&e.o){if(U.has(e))return;U.add(e),T.c.push(()=>{U.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const qe={duration:0};function Be(e,t,n){const i={direction:"in"};let r=t(e,n,i),o=!1,s,_,d=0;function u(){s&&oe(e,s)}function h(){const{delay:a=0,duration:c=300,easing:f=$e,tick:p=O,css:y}=r||qe;y&&(s=Pe(e,0,1,c,a,f,y,d++)),p(0,1);const m=ke()+a,$=m+c;_&&_.abort(),o=!0,Y(()=>le(e,!0,"start")),_=Ae(E=>{if(o){if(E>=$)return p(1,0),le(e,!0,"end"),u(),o=!1;if(E>=m){const b=f((E-m)/c);p(b,1-b)}}return o})}let l=!1;return{start(){l||(l=!0,oe(e),V(r)?(r=r(i),Ye().then(h)):h())},invalidate(){l=!1},end(){o&&(u(),o=!1)}}}function Ke(e,t){e.d(1),t.delete(e.key)}function Ue(e,t,n,i,r,o,s,_,d,u,h,l){let a=e.length,c=o.length,f=a;const p={};for(;f--;)p[e[f].key]=f;const y=[],m=new Map,$=new Map;for(f=c;f--;){const g=l(r,o,f),k=n(g);let v=s.get(k);v?i&&v.p(g,t):(v=u(k,g),v.c()),m.set(k,y[f]=v),k in p&&$.set(k,Math.abs(f-p[k]))}const E=new Set,b=new Set;function A(g){G(g,1),g.m(_,h),s.set(g.key,g),h=g.first,c--}for(;a&&c;){const g=y[c-1],k=e[a-1],v=g.key,S=k.key;g===k?(h=g.first,a--,c--):m.has(S)?!s.has(v)||E.has(v)?A(g):b.has(S)?a--:$.get(v)>$.get(S)?(b.add(v),A(g)):(E.add(S),a--):(d(k,s),a--)}for(;a--;){const g=e[a];m.has(g.key)||d(g,s)}for(;c;)A(y[c-1]);return y}function Je(e,t,n,i){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),i||Y(()=>{const s=e.$$.on_mount.map(de).filter(V);e.$$.on_destroy?e.$$.on_destroy.push(...s):M(s),e.$$.on_mount=[]}),o.forEach(Y)}function Qe(e,t){const n=e.$$;n.fragment!==null&&(M(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ve(e,t){e.$$.dirty[0]===-1&&(R.push(e),ze(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ze(e,t,n,i,r,o,s,_=[-1]){const d=W;z(e);const u=e.$$={fragment:null,ctx:[],props:o,update:O,not_equal:r,bound:ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:ne(),dirty:_,skip_bound:!1,root:t.target||d.$$.root};s&&s(u.root);let h=!1;if(u.ctx=n?n(e,t.props||{},(l,a,...c)=>{const f=c.length?c[0]:a;return u.ctx&&r(u.ctx[l],u.ctx[l]=f)&&(!u.skip_bound&&u.bound[l]&&u.bound[l](f),h&&Ve(e,l)),a}):[],u.update(),h=!0,M(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const l=Te(t.target);u.fragment&&u.fragment.l(l),l.forEach(N)}else u.fragment&&u.fragment.c();t.intro&&G(e.$$.fragment),Je(e,t.target,t.anchor,t.customElement),ve()}z(d)}class Ce{$destroy(){Qe(this,1),this.$destroy=O}$on(t,n){if(!V(n))return O;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!Ee(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function et(e){const t=e-1;return t*t*t+1}function tt(e,{delay:t=0,duration:n=400,easing:i=et,start:r=0,opacity:o=0}={}){const s=getComputedStyle(e),_=+s.opacity,d=s.transform==="none"?"":s.transform,u=1-r,h=_*(1-o);return{delay:t,duration:n,easing:i,css:(l,a)=>`
			transform: ${d} scale(${1-u*a});
			opacity: ${_-h*a}
		`}}const nt=300,it=60,we="none";function H(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function ot(e,t){return t.filter(n=>e.pointerId!==n.pointerId)}function q(e,t,n,i,r){e.dispatchEvent(new CustomEvent(`${t}${r}`,{detail:{event:n,pointersCount:i.length}}))}function rt(e,t,n,i,r,o=we){t.style.touchAction=o;let s=[];function _(u){s.push(u),q(t,e,u,s,"down"),i==null||i(s,u);const h=u.pointerId;function l(m){h===m.pointerId&&(s=ot(m,s),s.length||a(),q(t,e,m,s,"up"),r==null||r(s,m))}function a(){c(),f(),p(),y()}const c=H(t,"pointermove",m=>{s=s.map($=>m.pointerId===$.pointerId?m:$),q(t,e,m,s,"move"),n==null||n(s,m)}),f=H(t,"lostpointercapture",m=>{l(m)}),p=H(t,"pointerup",m=>{l(m)}),y=H(t,"pointerleave",m=>{s=[],a(),q(t,e,m,s,"up"),r==null||r(s,m)})}const d=H(t,"pointerdown",_);return{destroy:()=>{d()}}}function st(e,t={timeframe:nt,minSwipeDistance:it,touchAction:we}){const n="swipe";let i,r,o,s;function _(u,h){r=h.clientX,o=h.clientY,i=Date.now(),u.length===1&&(s=h.target)}function d(u,h){if(h.type==="pointerup"&&u.length===0&&Date.now()-i<t.timeframe){const l=h.clientX-r,a=h.clientY-o,c=Math.abs(l),f=Math.abs(a);let p=null;c>=2*f&&c>t.minSwipeDistance?p=l>0?"right":"left":f>=2*c&&f>t.minSwipeDistance&&(p=a>0?"bottom":"top"),p&&e.dispatchEvent(new CustomEvent(n,{detail:{direction:p,target:s}}))}}return rt(n,e,null,_,d,t.touchAction)}function ue(e,t,n){const i=e.slice();return i[10]=t[n].value,i[11]=t[n].x,i[12]=t[n].y,i[13]=t[n].id,i}function lt(e,t,n){const i=e.slice();return i[16]=t[n],i}function ct(e){let t;return{c(){t=L("div"),x(t,"class","block space svelte-kg8ihc")},m(n,i){Z(n,t,i)},p:O,d(n){n&&N(t)}}}function fe(e,t){let n,i,r=t[10]+"",o,s,_,d,u;return{key:e,first:null,c(){n=L("div"),i=L("div"),o=ye(r),_=ge(),x(i,"class","label svelte-kg8ihc"),x(i,"style",s=`
              font-size: ${1/(1+Math.floor(t[10]/10)/400)}em
            `),x(n,"class","block value svelte-kg8ihc"),x(n,"style",d=`
            top: ${t[12]*(F+j)}em;
            left: ${t[11]*(F+j)}em;
            background-color: var(--color${Math.log2(t[10])%B+1}-07);
            border: 0.2em solid var(--color${Math.log2(t[10])%B+1});
          `),this.first=n},m(h,l){Z(h,n,l),D(n,i),D(i,o),D(n,_)},p(h,l){t=h,l&1&&r!==(r=t[10]+"")&&De(o,r),l&1&&s!==(s=`
              font-size: ${1/(1+Math.floor(t[10]/10)/400)}em
            `)&&x(i,"style",s),l&1&&d!==(d=`
            top: ${t[12]*(F+j)}em;
            left: ${t[11]*(F+j)}em;
            background-color: var(--color${Math.log2(t[10])%B+1}-07);
            border: 0.2em solid var(--color${Math.log2(t[10])%B+1});
          `)&&x(n,"style",d)},i(h){u||Y(()=>{u=Be(n,tt,{}),u.start()})},o:O,d(h){h&&N(n)}}}function ae(e){let t,n,i,r,o=[],s=new Map,_={length:w**2},d=[];for(let l=0;l<_.length;l+=1)d[l]=ct(lt(e,_,l));let u=Object.values(e[0]);const h=l=>l[13];for(let l=0;l<u.length;l+=1){let a=ue(e,u,l),c=h(a);s.set(c,o[l]=fe(c,a))}return{c(){t=L("div"),n=L("div"),i=L("div");for(let l=0;l<d.length;l+=1)d[l].c();r=ge();for(let l=0;l<o.length;l+=1)o[l].c();x(i,"class","grid svelte-kg8ihc"),x(i,"style",`
          grid-template-columns: repeat(${w}, 1fr)
        `),x(n,"class","board svelte-kg8ihc"),x(n,"style",`
        --block-size: ${F}em;
        --gap: ${j}em;
      `),x(t,"class","game svelte-kg8ihc")},m(l,a){Z(l,t,a),D(t,n),D(n,i);for(let c=0;c<d.length;c+=1)d[c].m(i,null);D(n,r);for(let c=0;c<o.length;c+=1)o[c].m(n,null)},p(l,a){a&1&&(u=Object.values(l[0]),o=Ue(o,a,h,1,l,u,s,n,Ke,fe,null,ue))},i(l){for(let a=0;a<u.length;a+=1)G(o[a])},o:O,d(l){l&&N(t),Le(d,l);for(let a=0;a<o.length;a+=1)o[a].d()}}}function ut(e){let t,n=e[1],i,r,o=ae(e);return{c(){t=L("main"),o.c(),x(t,"class","svelte-kg8ihc")},m(s,_){Z(s,t,_),o.m(t,null),i||(r=[ie(window,"keydown",Se(e[2])),xe(st.call(null,t,{timeframe:1e3,minSwipeDistance:10,touchAction:"none"})),ie(t,"swipe",e[2])],i=!0)},p(s,[_]){_&2&&he(n,n=s[1])?(Ge(),ce(o,1,1,O),Xe(),o=ae(s),o.c(),G(o,1),o.m(t,null)):o.p(s,_)},i(s){G(o)},o(s){ce(o)},d(s){s&&N(t),o.d(s),i=!1,M(r)}}}let B=7,F=2.5,j=.5,w=4,ft=2;function at(e,t,n){let i,r,o,s,_={},d={};const u=(c,f)=>Math.floor(Math.random()*(f-c+1)+c),h=()=>n(1,_={}),l={ArrowUp:"UP",ArrowDown:"DOWN",ArrowLeft:"LEFT",ArrowRight:"RIGHT",top:"UP",bottom:"DOWN",left:"LEFT",right:"RIGHT"};Fe(()=>{for(let c=0;c<ft;c++)o()});const a=c=>{c.detail.direction&&console.log(c.detail.direction);const f=c.detail.direction??c.key;l[f]&&(s(l[f]),n(0,d={...d}),o())};return e.$$.update=()=>{e.$$.dirty&1&&(o=()=>{let c=Object.values(d),f=0;do f=Math.random();while(d[f]);let p=0,y=0,m=!1;do{p=u(0,w-1),y=u(0,w-1),m=!1;let E=c.length>0;if(c.forEach(b=>{let A=b.x===p&&b.y===y;A&&(m=!0),A||(E=!1)}),E&&console.log(E),E)return h()}while(m);let $=u(0,9)?2:4;n(0,d[f]={id:f,x:p,y,value:$},d)}),e.$$.dirty&25&&(s=c=>Object.values(d).sort(i[c]).forEach((f,p,y)=>{const{main_axis:m,cross_axis:$,increment:E,limit:b}=r[c];for(;;){let{[m]:A,[$]:g,value:k}=f;if(A===b)return;A+=E;const v=y[p-1],S=A===(v==null?void 0:v[m])&&g===(v==null?void 0:v[$]);if(S&&k!==v.value)return;if(f[m]=A,!!S){delete d[v.id],f.value*=2;return}}}))},n(4,i={UP:(c,f)=>c.x*w+c.y-(f.x*w+f.y),DOWN:(c,f)=>f.x*w+f.y-(c.x*w+c.y),RIGHT:(c,f)=>f.x+f.y*w-(c.x+c.y*w),LEFT:(c,f)=>c.x+c.y*w-(f.x+f.y*w)}),n(3,r={UP:{main_axis:"y",cross_axis:"x",increment:-1,limit:0},DOWN:{main_axis:"y",cross_axis:"x",increment:1,limit:w-1},LEFT:{main_axis:"x",cross_axis:"y",increment:-1,limit:0},RIGHT:{main_axis:"x",cross_axis:"y",increment:1,limit:w-1}}),[d,_,a,r,i]}class dt extends Ce{constructor(t){super(),Ze(this,t,at,ut,he,{})}}new dt({target:document.getElementById("app")});
