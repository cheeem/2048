(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function b(){}const pt=t=>t;function ct(t){return t()}function tt(){return Object.create(null)}function j(t){t.forEach(ct)}function U(t){return typeof t=="function"}function yt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function gt(t){return Object.keys(t).length===0}function vt(t){return t&&U(t.destroy)?t.destroy:b}const ut=typeof window<"u";let wt=ut?()=>window.performance.now():()=>Date.now(),V=ut?t=>requestAnimationFrame(t):b;const S=new Set;function ft(t){S.forEach(e=>{e.c(t)||(S.delete(e),e.f())}),S.size!==0&&V(ft)}function $t(t){let e;return S.size===0&&V(ft),{promise:new Promise(n=>{S.add(e={c:t,f:n})}),abort(){S.delete(e)}}}function O(t,e){t.appendChild(e)}function at(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Et(t){const e=L("style");return xt(at(t),e),e.sheet}function xt(t,e){return O(t.head||t,e),e.sheet}function Z(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode&&t.parentNode.removeChild(t)}function kt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function L(t){return document.createElement(t)}function dt(t){return document.createTextNode(t)}function ht(){return dt(" ")}function et(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function bt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function E(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function At(t){return Array.from(t.childNodes)}function Ot(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Lt(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}const B=new Map;let K=0;function St(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Tt(t,e){const n={stylesheet:Et(e),rules:{}};return B.set(t,n),n}function Dt(t,e,n,i,r,s,l,h=0){const p=16.666/i;let f=`{
`;for(let y=0;y<=1;y+=p){const _=e+(n-e)*s(y);f+=y*100+`%{${l(_,1-_)}}
`}const a=f+`100% {${l(n,1-n)}}
}`,d=`__svelte_${St(a)}_${h}`,c=at(t),{stylesheet:o,rules:u}=B.get(c)||Tt(c,t);u[d]||(u[d]=!0,o.insertRule(`@keyframes ${d} ${a}`,o.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${i}ms linear ${r}ms 1 both`,K+=1,d}function nt(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),K-=r,K||It())}function It(){V(()=>{K||(B.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&z(e)}),B.clear())})}let R;function H(t){R=t}function Mt(){if(!R)throw new Error("Function called outside component initialization");return R}function Nt(t){Mt().$$.on_mount.push(t)}const M=[],ot=[],q=[],it=[],Pt=Promise.resolve();let Q=!1;function Ht(){Q||(Q=!0,Pt.then(mt))}function F(t){q.push(t)}const J=new Set;let Y=0;function mt(){const t=R;do{for(;Y<M.length;){const e=M[Y];Y++,H(e),Rt(e.$$)}for(H(null),M.length=0,Y=0;ot.length;)ot.pop()();for(let e=0;e<q.length;e+=1){const n=q[e];J.has(n)||(J.add(n),n())}q.length=0}while(M.length);for(;it.length;)it.pop()();Q=!1,J.clear(),H(t)}function Rt(t){if(t.fragment!==null){t.update(),j(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}let D;function Ft(){return D||(D=Promise.resolve(),D.then(()=>{D=null})),D}function rt(t,e,n){t.dispatchEvent(Lt(`${e?"intro":"outro"}${n}`))}const jt=new Set;function C(t,e){t&&t.i&&(jt.delete(t),t.i(e))}const zt={duration:0};function Wt(t,e,n){const i={direction:"in"};let r=e(t,n,i),s=!1,l,h,p=0;function f(){l&&nt(t,l)}function a(){const{delay:c=0,duration:o=300,easing:u=pt,tick:m=b,css:y}=r||zt;y&&(l=Dt(t,0,1,o,c,u,y,p++)),m(0,1);const _=wt()+c,x=_+o;h&&h.abort(),s=!0,F(()=>rt(t,!0,"start")),h=$t(A=>{if(s){if(A>=x)return m(1,0),rt(t,!0,"end"),f(),s=!1;if(A>=_){const k=u((A-_)/o);m(k,1-k)}}return s})}let d=!1;return{start(){d||(d=!0,nt(t),U(r)?(r=r(i),Ft().then(a)):a())},invalidate(){d=!1},end(){s&&(f(),s=!1)}}}function Yt(t,e){t.d(1),e.delete(t.key)}function Gt(t,e,n,i,r,s,l,h,p,f,a,d){let c=t.length,o=s.length,u=c;const m={};for(;u--;)m[t[u].key]=u;const y=[],_=new Map,x=new Map;for(u=o;u--;){const g=d(r,s,u),v=n(g);let $=l.get(v);$?i&&$.p(g,e):($=f(v,g),$.c()),_.set(v,y[u]=$),v in m&&x.set(v,Math.abs(u-m[v]))}const A=new Set,k=new Set;function T(g){C(g,1),g.m(h,a),l.set(g.key,g),a=g.first,o--}for(;c&&o;){const g=y[o-1],v=t[c-1],$=g.key,W=v.key;g===v?(a=g.first,c--,o--):_.has(W)?!l.has($)||A.has($)?T(g):k.has(W)?c--:x.get($)>x.get(W)?(k.add($),T(g)):(A.add(W),c--):(p(v,l),c--)}for(;c--;){const g=t[c];_.has(g.key)||p(g,l)}for(;o;)T(y[o-1]);return y}function Xt(t,e,n,i){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),i||F(()=>{const l=t.$$.on_mount.map(ct).filter(U);t.$$.on_destroy?t.$$.on_destroy.push(...l):j(l),t.$$.on_mount=[]}),s.forEach(F)}function qt(t,e){const n=t.$$;n.fragment!==null&&(j(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Bt(t,e){t.$$.dirty[0]===-1&&(M.push(t),Ht(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Kt(t,e,n,i,r,s,l,h=[-1]){const p=R;H(t);const f=t.$$={fragment:null,ctx:[],props:s,update:b,not_equal:r,bound:tt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(p?p.$$.context:[])),callbacks:tt(),dirty:h,skip_bound:!1,root:e.target||p.$$.root};l&&l(f.root);let a=!1;if(f.ctx=n?n(t,e.props||{},(d,c,...o)=>{const u=o.length?o[0]:c;return f.ctx&&r(f.ctx[d],f.ctx[d]=u)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](u),a&&Bt(t,d)),c}):[],f.update(),a=!0,j(f.before_update),f.fragment=i?i(f.ctx):!1,e.target){if(e.hydrate){const d=At(e.target);f.fragment&&f.fragment.l(d),d.forEach(z)}else f.fragment&&f.fragment.c();e.intro&&C(t.$$.fragment),Xt(t,e.target,e.anchor,e.customElement),mt()}H(p)}class Ut{$destroy(){qt(this,1),this.$destroy=b}$on(e,n){if(!U(n))return b;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Jt(t){const e=t-1;return e*e*e+1}function Qt(t,{delay:e=0,duration:n=400,easing:i=Jt,start:r=0,opacity:s=0}={}){const l=getComputedStyle(t),h=+l.opacity,p=l.transform==="none"?"":l.transform,f=1-r,a=h*(1-s);return{delay:e,duration:n,easing:i,css:(d,c)=>`
			transform: ${p} scale(${1-f*c});
			opacity: ${h-a*c}
		`}}const Vt=300,Zt=60,_t="none";function I(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function Ct(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function G(t,e,n,i,r){t.dispatchEvent(new CustomEvent(`${e}${r}`,{detail:{event:n,pointersCount:i.length}}))}function te(t,e,n,i,r,s=_t){e.style.touchAction=s;let l=[];function h(f){l.push(f),G(e,t,f,l,"down"),i==null||i(l,f);const a=f.pointerId;function d(_){a===_.pointerId&&(l=Ct(_,l),l.length||c(),G(e,t,_,l,"up"),r==null||r(l,_))}function c(){o(),u(),m(),y()}const o=I(e,"pointermove",_=>{l=l.map(x=>_.pointerId===x.pointerId?_:x),G(e,t,_,l,"move"),n==null||n(l,_)}),u=I(e,"lostpointercapture",_=>{d(_)}),m=I(e,"pointerup",_=>{d(_)}),y=I(e,"pointerleave",_=>{l=[],c(),G(e,t,_,l,"up"),r==null||r(l,_)})}const p=I(e,"pointerdown",h);return{destroy:()=>{p()}}}function ee(t,e={timeframe:Vt,minSwipeDistance:Zt,touchAction:_t}){const n="swipe";let i,r,s,l;function h(f,a){r=a.clientX,s=a.clientY,i=Date.now(),f.length===1&&(l=a.target)}function p(f,a){if(a.type==="pointerup"&&f.length===0&&Date.now()-i<e.timeframe){const d=a.clientX-r,c=a.clientY-s,o=Math.abs(d),u=Math.abs(c);let m=null;o>=2*u&&o>e.minSwipeDistance?m=d>0?"right":"left":u>=2*o&&u>e.minSwipeDistance&&(m=c>0?"bottom":"top"),m&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:m,target:l}}))}}return te(n,t,null,h,p,e.touchAction)}function st(t,e,n){const i=t.slice();return i[9]=e[n].value,i[10]=e[n].x,i[11]=e[n].y,i[12]=e[n].id,i}function ne(t,e,n){const i=t.slice();return i[15]=e[n],i}function oe(t){let e;return{c(){e=L("div"),E(e,"class","block space svelte-ovkp93")},m(n,i){Z(n,e,i)},p:b,d(n){n&&z(e)}}}function lt(t,e){let n,i,r=e[9]+"",s,l,h,p,f;return{key:t,first:null,c(){n=L("div"),i=L("div"),s=dt(r),h=ht(),E(i,"class","label svelte-ovkp93"),E(i,"style",l=`
          font-size: ${1/(1+Math.floor(e[9]/10)/400)}em
        `),E(n,"class","block value svelte-ovkp93"),E(n,"style",p=`
        top: ${e[11]*(N+P)}em;
        left: ${e[10]*(N+P)}em;
        background-color: var(--color${Math.log2(e[9])%X+1}-07);
        border: 0.2em solid var(--color${Math.log2(e[9])%X+1});
      `),this.first=n},m(a,d){Z(a,n,d),O(n,i),O(i,s),O(n,h)},p(a,d){e=a,d&1&&r!==(r=e[9]+"")&&Ot(s,r),d&1&&l!==(l=`
          font-size: ${1/(1+Math.floor(e[9]/10)/400)}em
        `)&&E(i,"style",l),d&1&&p!==(p=`
        top: ${e[11]*(N+P)}em;
        left: ${e[10]*(N+P)}em;
        background-color: var(--color${Math.log2(e[9])%X+1}-07);
        border: 0.2em solid var(--color${Math.log2(e[9])%X+1});
      `)&&E(n,"style",p)},i(a){f||F(()=>{f=Wt(n,Qt,{}),f.start()})},o:b,d(a){a&&z(n)}}}function ie(t){let e,n,i,r,s=[],l=new Map,h,p,f={length:w**2},a=[];for(let o=0;o<f.length;o+=1)a[o]=oe(ne(t,f,o));let d=Object.values(t[0]);const c=o=>o[12];for(let o=0;o<d.length;o+=1){let u=st(t,d,o),m=c(u);l.set(m,s[o]=lt(m,u))}return{c(){e=L("main"),n=L("div"),i=L("div");for(let o=0;o<a.length;o+=1)a[o].c();r=ht();for(let o=0;o<s.length;o+=1)s[o].c();E(i,"class","grid svelte-ovkp93"),E(i,"style",`
      grid-template-columns: repeat(${w}, 1fr)
    `),E(n,"class","board svelte-ovkp93"),E(n,"style",`
    --block-size: ${N}em;
    --gap: ${P}em;
  `),E(e,"class","svelte-ovkp93")},m(o,u){Z(o,e,u),O(e,n),O(n,i);for(let m=0;m<a.length;m+=1)a[m].m(i,null);O(n,r);for(let m=0;m<s.length;m+=1)s[m].m(n,null);h||(p=[et(window,"keydown",bt(t[1])),vt(ee.call(null,e,{timeframe:1e3,minSwipeDistance:10,touchAction:"none"})),et(e,"swipe",t[1])],h=!0)},p(o,[u]){u&1&&(d=Object.values(o[0]),s=Gt(s,u,c,1,o,d,l,n,Yt,lt,null,st))},i(o){for(let u=0;u<d.length;u+=1)C(s[u])},o:b,d(o){o&&z(e),kt(a,o);for(let u=0;u<s.length;u+=1)s[u].d();h=!1,j(p)}}}let X=7,N=2.5,P=.5,w=4,re=2;function se(t,e,n){let i,r,s,l,h={};const p=(c,o)=>Math.floor(Math.random()*(o-c+1)+c),f=()=>{n(0,h={});for(let c=0;c<re;c++)s([])},a={ArrowUp:"UP",ArrowDown:"DOWN",ArrowLeft:"LEFT",ArrowRight:"RIGHT",top:"UP",bottom:"DOWN",left:"LEFT",right:"RIGHT"};Nt(f);const d=c=>{const o=c.detail.direction??c.key;if(!a[o])return;l(a[o]),n(0,h={...h});const u=Object.values(h);if(u.length===w**2)return f();s(u)};return t.$$.update=()=>{t.$$.dirty&1&&(s=c=>{let o=0;do o=Math.random();while(h[o]);let u=0,m=0;do u=p(0,w-1),m=p(0,w-1);while(c.some(_=>_.x===u&&_.y===m));let y=p(0,9)?2:4;n(0,h[o]={id:o,x:u,y:m,value:y},h)}),t.$$.dirty&13&&(l=c=>Object.values(h).sort(i[c]).forEach((o,u,m)=>{const{main_axis:y,cross_axis:_,increment:x,limit:A}=r[c];for(;;){let{[y]:k,[_]:T,value:g}=o;if(k===A)return;k+=x;const v=m[u-1],$=k===(v==null?void 0:v[y])&&T===(v==null?void 0:v[_]);if($&&g!==v.value)return;if(o[y]=k,!!$){delete h[v.id],o.value*=2;return}}}))},n(3,i={UP:(c,o)=>c.x*w+c.y-(o.x*w+o.y),DOWN:(c,o)=>o.x*w+o.y-(c.x*w+c.y),RIGHT:(c,o)=>o.x+o.y*w-(c.x+c.y*w),LEFT:(c,o)=>c.x+c.y*w-(o.x+o.y*w)}),n(2,r={UP:{main_axis:"y",cross_axis:"x",increment:-1,limit:0},DOWN:{main_axis:"y",cross_axis:"x",increment:1,limit:w-1},LEFT:{main_axis:"x",cross_axis:"y",increment:-1,limit:0},RIGHT:{main_axis:"x",cross_axis:"y",increment:1,limit:w-1}}),[h,d,r,i]}class le extends Ut{constructor(e){super(),Kt(this,e,se,ie,yt,{})}}new le({target:document.getElementById("app")});
